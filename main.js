!function(){"use strict";class e{constructor(e,t,s){let{name:n,link:r}=e;this._name=n,this._link=r,this._handleCardClick=s,this._cardSelector=t}_setEventListeners(){this._cardElement.querySelector(".cards__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".cards__delete-button").addEventListener("click",(()=>{this._handleDeleteIcon()})),this._cardElement.querySelector(".cards__image").addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}_handleLikeIcon(){this._cardElement.querySelector(".cards__like-button").classList.toggle("cards__like-button_active")}_handleDeleteIcon(){this._cardElement.remove()}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".cards__content").cloneNode(!0),this._cardElement.querySelector(".cards__image").src=this._link,this._cardElement.querySelector(".cards__title").innerText=this._name,this._cardElement.querySelector(".cards__image").alt=this._name,this._setEventListeners(),this._cardElement}}var t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleButtonState(){this._hasInvalidInput()?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._formElement.addEventListener("reset",(()=>{this._toggleButtonState()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}};class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target.classList.contains("modal__close-button")||e.target.classList.contains("modal_opened"))&&this.close()}))}}class n extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}_getInputValues(){return this._inputList=this._popupElement.querySelectorAll(".modal__input"),this._values={},this._inputList.forEach((e=>{this._values[e.name]=e.value})),this._values}setEventListeners(){this._popupForm.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}close(){this._popupForm.reset(),super.close()}}const r={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},i=document.querySelector("#profile-edit-modal"),o=i.querySelector("#profile-edit-form"),l=document.querySelector("#add-card-modal").querySelector("#add-card-form"),a=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._nameElement.textContent=t,this._jobElement.textContent=s}}({nameSelector:".profile__title",jobSelector:".profile__description"}),c=new n("#profile-edit-modal",(function(e){a.setUserInfo(e),c.close()}));c.setEventListeners();const u=new n("#add-card-modal",(function(e){return v({name:e.title,link:e.link})}));u.setEventListeners();const d=new class extends s{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector(".modal__preview-image"),this._previewTitle=this._popupElement.querySelector(".modal__preview-title")}open(e,t){this._previewImage.src=t,this._previewImage.alt=e,this._previewTitle.textContent=e,super.open()}}("#preview-image-modal");d.setEventListeners();const _=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._containerElement=document.querySelector(t)}renderItems(){this._items.forEach(this._renderer)}addItem(e){this._containerElement.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:v},"#cards__list");_.renderItems();const m=document.querySelector("#profile-edit-btn"),p=(i.querySelector(".modal__close-button"),document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-title-input")),h=document.querySelector("#profile-description-input"),E=document.querySelector(".profile__add-button");function v(t){const s=new e(t,"#card-template",S).getView();_.addItem(s)}function S(e,t){d.open(e,t)}m.addEventListener("click",(()=>{const e=a.getUserInfo();p.value=e.name,h.value=e.job,f.resetValidation(),c.open()})),E.addEventListener("click",(()=>{g.resetValidation(),u.open()}));const f=new t(r,o);f.enableValidation();const g=new t(r,l);g.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxFQUFrQnJFLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgfVxyXG5cclxuICAvL0VWRU5UIExJU1RFTkVSU1xyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vY2FyZCBsaWtlIGJ1dHRvblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIC8vY2FyZCBkZWxldGUgYnV0dG9uXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fZGVsZXRlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVJY29uKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIC8vb3BlbiBpbWFnZSBwcmV2aWV3XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkc19faW1hZ2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vRVZFTlQgSEFORExFUlNcclxuICBfaGFuZGxlTGlrZUljb24oKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlrZS1idXR0b25cIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkc19fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUljb24oKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fY29udGVudFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2ltYWdlXCIpLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX190aXRsZVwiKS5pbm5lclRleHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19faW1hZ2VcIikuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvciksXHJcbiAgICBdO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XHJcbiAgICBjb25zdCBrZXkgPSBlLmtleTtcclxuICAgIGlmIChrZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnV0dG9uXCIpIHx8XHJcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgLy9jb2xsZWN0cyBkYXRhIGZyb20gYWxsIHRoZSBpbnB1dCBmaWVsZHNcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX3ZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX3ZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgY29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuLy8gV3JhcHBlcnNcclxuY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWZvcm1cIik7XHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XHJcbmNvbnN0IGFkZENhcmRGb3JtID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtZm9ybVwiKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXHJcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0XHJcbik7XHJcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2FkZC1jYXJkLW1vZGFsXCIsIGhhbmRsZUFkZENhcmRTdWJtaXQpO1xyXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIik7XHJcbnByZXZpZXdJbWFnZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICB9LFxyXG4gIFwiI2NhcmRzX19saXN0XCJcclxuKTtcclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbi8vIEVsZW1lbnRzIEVkaXQgTW9kYWxcclxuY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idG5cIik7XHJcbmNvbnN0IHByb2ZpbGVDbG9zZUJ0biA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5jb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4pO1xyXG5cclxuY29uc3QgYWRkQ2FyZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUNhcmRDbGljayk7XHJcbiAgY29uc3QgY2FyZEVsID0gY2FyZC5nZXRWaWV3KCk7XHJcblxyXG4gIC8vYWRkIGl0ZW1zIGhlcmVcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KHZhbHVlcykge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHZhbHVlcyk7XHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KHZhbHVlcykge1xyXG4gIGNvbnN0IG5hbWUgPSB2YWx1ZXMudGl0bGU7XHJcbiAgY29uc3QgbGluayA9IHZhbHVlcy5saW5rO1xyXG4gIHtcclxuICAgIHJldHVybiByZW5kZXJDYXJkKHsgbmFtZSwgbGluayB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhuYW1lLCBsaW5rKSB7XHJcbiAgcHJldmlld0ltYWdlTW9kYWwub3BlbihuYW1lLCBsaW5rKTtcclxufVxyXG5cclxuLy8gRWRpdCBNb2RhbCBMaXN0ZW5lcnNcclxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB1c2VyID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHVzZXIubmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXIuam9iO1xyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vIEFkZCBDYXJkIE1vZGFsIExpc3RlbmVyc1xyXG5hZGRDYXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLyBGb3JtIFZhbGlkYXRvclxyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZUVkaXRGb3JtKTtcclxucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgY2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGFkZENhcmRGb3JtKTtcclxuY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fcHJldmlldy1pbWFnZVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fcHJldmlld1RpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX19wcmV2aWV3LXRpdGxlXCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcmV2aWV3VGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXJFbGVtZW50LnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfY2FyZFNlbGVjdG9yIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfaGFuZGxlRGVsZXRlSWNvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsImdldFZpZXciLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJzcmMiLCJpbm5lclRleHQiLCJhbHQiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbHMiLCJldmVyeSIsImlucHV0RWwiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zaG93SW5wdXRFcnJvciIsIl9oaWRlSW5wdXRFcnJvciIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXRMaXN0IiwiX3ZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlRWRpdEZvcm0iLCJhZGRDYXJkRm9ybSIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImdldFVzZXJJbmZvIiwiam9iIiwic2V0VXNlckluZm8iLCJfcmVmMiIsImRlc2NyaXB0aW9uIiwiZWRpdFByb2ZpbGVQb3B1cCIsInZhbHVlcyIsImFkZENhcmRQb3B1cCIsInJlbmRlckNhcmQiLCJ0aXRsZSIsInByZXZpZXdJbWFnZU1vZGFsIiwiX3ByZXZpZXdJbWFnZSIsIl9wcmV2aWV3VGl0bGUiLCJjYXJkU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXJFbGVtZW50IiwicmVuZGVySXRlbXMiLCJhZGRJdGVtIiwiaXRlbSIsInByZXBlbmQiLCJwcm9maWxlRWRpdEJ0biIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJhZGRDYXJkQnRuIiwiY2FyZERhdGEiLCJjYXJkRWwiLCJ1c2VyIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJjYXJkRm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9